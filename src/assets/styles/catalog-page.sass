
@use "_vars" as *   

.icon
  width: 20px
  height: 20px
  object-fit: contain

.catalog-page
  padding: 40px 0 112px
  @media all and ($m)
    padding: 24px 0
.page-intro
  display: flex
  flex-direction: column
  gap: 24px
  margin-bottom: 48px
  @media all and ($m)
    margin-bottom: 12px

.breadcrumbs
  display: flex
  align-items: center
  gap: 4px
  font-size: 14px
  color: $gray-darken-1

.page-title
  font-size: 40px
  font-weight: 500
  line-height: 1.2
  @media all and ($m)
    font-size: 24px

.catalog-layout
  display: grid
  grid-template-columns: 264px 1fr
  gap: 24px
  @media all and ($xl)
    grid-template-columns: 274px 1fr
    gap: 30px
  @media all and ($l)
    grid-template-columns: 264px 1fr
    gap: 24px
  @media all and ($m)
    grid-template-columns: 1fr
.catalog-sidebar
  width: 264px
  flex-shrink: 0
  display: flex
  flex-direction: column
  gap: 32px
  @media all and ($m)
    position: absolute
    right: 0
    background: #fff
    z-index: 1000
    width: 100%
    padding: 24px

.sidebar-block
  display: flex
  flex-direction: column
  gap: 24px

.sidebar-title
  font-size: 16px
  font-weight: 500
  color: $gray-darken-3

.filter-group
  display: flex
  flex-direction: column
  gap: 12px

.filter-label
  font-size: 14px
  font-weight: 500

.price-filter
  display: flex
  gap: 8px

.price-input-wrapper
  display: flex
  align-items: center
  gap: 8px
  border: 1px solid $gray-lighten-2
  border-radius: 4px
  padding: 8px 16px
  font-size: 14px
  flex: 1
  & span
    color: $gray-lighten-4
  & input
    border: none
    outline: none
    width: 100%
    font-size: 14px

.discount-filter
  flex-direction: row
  justify-content: space-between
  align-items: center
  padding: 8px 0

.toggle-switch
  position: relative
  width: 38px
  height: 20px
  &__checkbox
    opacity: 0
    width: 0
    height: 0
  &__label
    position: absolute
    cursor: pointer
    top: 0
    left: 0
    right: 0
    bottom: 0
    background-color: #ddd
    border-radius: 10px
    transition: background-color $anim
  &__label::after
    content: ''
    position: absolute
    top: 3px
    left: 3px
    width: 14px
    height: 14px
    background-color: #fff
    border-radius: 50%
    transition: transform $anim, background-color $anim
  &__checkbox:checked + .toggle-switch__label
    background-color: $green
  &__checkbox:checked + .toggle-switch__label::after
    background-color: #fff
    transform: translateX(18px)
  &__label::before
    content: ''
    position: absolute
    top: 3px
    left: 3px
    width: 14px
    height: 14px
    background-color: white
    border-radius: 50%
    transition: transform $anim
  &__checkbox:checked + &__label::before
    transform: translateX(19px)

.products-area
  flex-grow: 1

.products-toolbar
  display: grid
  grid-template-areas: 'sort count'
  justify-content: space-between
  align-items: center
  margin-bottom: 24px
  @media all and ($m)
    grid-template-areas: 'count count' 'sort filters'

.sort-button
  font-size: 14px
  font-weight: 500
  line-height: 130%
  color: $gray-darken-3

.product-count
  font-size: 14px
  color: $gray-text
  grid-area: count

.products-grid
  display: grid
  grid-template-columns: repeat(4, 1fr)
  gap: 64px 24px
  margin-bottom: 64px
  @media all and ($xl)
    grid-template-columns: repeat(3, 1fr)
    gap: 64px 30px
  @media all and ($l)
    gap: 64px 24px
  @media all and ($m)
    grid-template-columns: repeat(4, 1fr)
    gap: 24px 16px
  @media all and ($s)
    grid-template-columns: repeat(3, 1fr)
  @media all and ($xs)
    grid-template-columns: repeat(2, 1fr)
    gap: 24px 8px

.show-more-button
  width: 100%
  background-color: #efeff0
  color: #1a1a1b
  font-size: 16px
  font-weight: 500
  padding: 13px 16px
  border-radius: 4px

.page-link
  display: flex
  justify-content: center
  align-items: center
  width: 48px
  height: 48px
  border-radius: 4px
  font-size: 16px
  font-weight: 500
  color: $gray-text
  &.active
    background-color: $green
    color: #fff
  &.ellipsis
    color: $gray-text

.category-modal 
  .category-nav__btn 
    display: flex
    justify-content: start
    gap: 4px
  .category-nav__item.active
    .category-nav__arrow-btn
      transform: rotate(180deg)
    .category-nav__subcategory-list
      display: grid

.category-nav
  &__list
    display: grid
  &__item
    display: grid
    padding: 8px 0
    font-size: 14px
    font-weight: 400
    line-height: 130%
    color: $gray-darken-3
    // &.active
    //   .category-nav__arrow-btn
    //     transform: rotate(180deg)
    //   .category-nav__subcategory-list
    //     display: grid
  &__title
    font-size: 14px
    font-style: normal
    font-weight: 400
    line-height: 130%
    color: $gray-darken-3
  &__btn
    display: grid
    grid-auto-flow: column
    justify-content: space-between
    .category-nav__arrow-btn
      transform: rotate(-90deg)
  &__subcategory-item
    padding: 8px 16px
  &__subcategory-list
    display: none
    padding-top: 10px
    padding-bottom: 8px
  &__subcategory-link
    position: relative
    font-size: 14px
    font-style: normal
    font-weight: 400
    line-height: 130%
    color: $gray-darken-3
    transition: color $anim
    &::before
      display: block
      position: absolute
      top: 50%
      left: -12px
      transform: translateY(-50%)
      width: 4px
      height: 4px
      background-color: $green
      border-radius: 50%
      content: ''
      opacity: 0
      transition: opacity $anim
    &:hover, &:focus, &:active, &.active
      color: $green
      &::before
        opacity: 1

/// выпадающий список 

.sort-container
  position: relative
  display: inline-block
  font-family: $Int
  width: 100%
  max-width: 250px
  @media all and ($m)
    position: static

.sort-toggle
  grid-area: sort
  border-radius: 4px
  padding: 12px 16px 12px 0
  cursor: pointer
  display: grid
  align-items: center
  gap: 12px
  justify-content: space-between
  transition: border-color $anim
  width: 100%
  font-size: 14px
  color: $gray-darken-3
  text-align: left
  &:hover
    .selected-text
      color: $green

.icon-wrapper
  display: flex
  align-items: center
  gap: 8px
  flex: 1

.icon-current
  width: 16px
  height: 16px
  color: $gray-darken-3
  transition: color $anim
  flex-shrink: 0

.selected-text
  font-size: 14px
  font-style: normal
  font-weight: 500
  line-height: 130%
  color: $gray-darken-3
  flex: 1
  white-space: nowrap
  overflow: hidden
  text-overflow: ellipsis
  transition: color $anim

.sort-toggle:hover .icon-current,
.sort-toggle:hover .icon-arrow
  color: $green

.sort-menu
  display: none
  position: absolute
  top: 100%
  left: 0
  right: 0
  border-radius: 4px
  background: #FFF
  box-shadow: 0 4px 12.2px 0 rgba(0, 0, 0, 0.11)
  list-style: none
  margin: 0
  z-index: 1000
  max-height: 300px
  overflow-y: auto
  min-width: 236px
  padding: 12px
  &.active
    display: block
  & li
    padding: 12px
    cursor: pointer
    display: flex
    align-items: center
    gap: 12px
    color: $gray-darken-3
    transition: all $anim
    font-size: 14px

// Кнопка сортировки для мобильных (по умолчанию скрыта)
.mobile-sort-button
  display: none
  grid-area: sort
  border-radius: 4px
  padding: 12px 16px 12px 0
  cursor: pointer
  align-items: center
  gap: 12px
  justify-content: space-between
  width: 100%
  font-size: 14px
  color: $gray-darken-3
  text-align: left
  background: none
  border: none
  font-family: $Int
.sort-modal-overlay
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  background: rgba(0, 0, 0, 0.6)
  z-index: 1001
  display: none
  &.active
    display: block
// Модальное окно сортировки (по умолчанию скрыто)
.sort-modal
  position: fixed
  bottom: 0
  left: 0
  width: 100%
  height: auto
  background: white
  z-index: 1002
  display: none
  flex-direction: column
  transform: translateY(100%)
  transition: transform $anim
  border-radius: 8px 8px 0 0
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15)
  max-height: 70vh
  &.active
    display: flex
    transform: translateY(0)
  .modal-header
    display: flex
    justify-content: space-between
    align-items: center
    padding: 16px
    font-size: 18px
    font-weight: 500
    border-bottom: 1px solid $gray-lighten-2
  .modal-close
    cursor: pointer
    font-size: 24px
    line-height: 1
    position: absolute
    right: 13px
    top: 13px
    width: 24px
    height: 24px
  .modal-body
    flex: 1
    overflow-y: auto
    padding: 16px
  // Стили для списка в модальном окне
  .sort-menu-modal
    list-style: none
    margin: 0
    padding: 0
    & li
      padding: 12px
      cursor: pointer
      display: flex
      align-items: center
      gap: 12px
      color: $gray-darken-3
      transition: all $anim
      font-size: 14px
      &:hover,
      &.active
        color: $green
      .icon
        width: 16px
        height: 16px
        color: $gray-text
        transition: color $anim
        flex-shrink: 0
      &:hover .icon,
      &.active .icon
        color: $green
      span
        flex: 1
        white-space: nowrap
        overflow: hidden
        text-overflow: ellipsis

// Показываем мобильную кнопку и скрываем десктопный dropdown на $m
@media all and ($m)
  .sort-container
    display: none
  .mobile-sort-button
    display: flex

// Адаптация для маленьких экранов
@media screen and ($s)
  .mobile-sort-button
    padding: 10px 14px 10px 0
    font-size: 13px
  .sort-modal .sort-menu-modal li
    padding: 10px 14px
    font-size: 13px

.sort-menu li:hover,
.sort-menu li.active
  color: $green

.sort-menu li:hover .icon,
.sort-menu li.active .icon
  color: $green

.sort-menu li .icon
  width: 16px
  height: 16px
  color: $gray-text
  transition: color $anim
  flex-shrink: 0

.sort-menu li span
  flex: 1
  white-space: nowrap
  overflow: hidden
  text-overflow: ellipsis

.apply-button, .sidebar-header, .filter-item, .filters-button, .category-modal, .price-modal, .sidebar-body
  display: none

@media all and ($m)
  .sidebar-body
    display: grid
    align-content: start
  // Кнопка "Фильтры" поверх контента
  .filters-button
    grid-area: filters
    display: grid
    align-items: center
    gap: 8px
    grid-template-columns: 16px 1fr
    font-size: 14px
    font-style: normal
    font-weight: 500
    line-height: 130%
    color: $gray-darken-3
    cursor: pointer
    transition: color $anim
    &:hover,
    &:hover .icon-current
      color: $green

  // Боковая панель как модальное окно слева
  .catalog-sidebar
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100vh
    background: white
    z-index: 1000
    display: flex
    flex-direction: column
    transform: translateX(-100%)
    transition: transform $anim
    padding: 0
    gap: 0
    overflow: hidden
    &.active
      transform: translateX(0)
    .sidebar-header
      display: flex
      justify-content: space-between
      align-items: center
      padding: 16px
      font-size: 18px
      font-weight: 500
      border-bottom: 1px solid $gray-lighten-2
    .sidebar-close
      cursor: pointer
      font-size: 24px
      line-height: 1
    .sidebar-body
      flex: 1
      overflow-y: auto
      padding: 16px
    .filter-item
      display: flex
      justify-content: space-between
      align-items: center
      padding: 12px 0
      font-weight: 500
      font-size: 14px
      cursor: pointer
    .category-nav__arrow-btn
      cursor: pointer
      transform: rotate(-90deg)
    .category-nav,
    .price-filter,
    .discount-filter:not(.filter-item)
      display: none
    .sidebar-block
      display: none

  .category-modal,
  .price-modal,
  .category-modal-header
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100vh
    background: white
    z-index: 1001
    display: flex
    flex-direction: column
    transform: translateX(-100%)
    &.active
      transform: translateX(0)
    .modal-header
      display: flex
      justify-content: space-between
      align-items: center
      padding: 16px
      font-size: 18px
      font-weight: 500
      border-bottom: 1px solid $gray-lighten-2
    .modal-close
      cursor: pointer
      font-size: 24px
      line-height: 1
    .modal-body
      flex: 1
      overflow-y: auto
      padding: 16px
    .category-nav
      display: block
    .price-filter
      display: flex
      @media all and ($s)
        display: grid
        gap: 16px
    .apply-button
      background: $green
      color: white
      padding: 16px
      text-align: center
      font-weight: 500
      cursor: pointer
      display: grid
      margin: 16px
      border-radius: 4px
      transition: background $anim
      &:hover, &:active, &:focus
        background: $green-darken
  .category-header__btn
    display: grid
    grid-template-columns: 16px 1fr
    gap: 16px
    align-items: center
    .category-nav__arrow-btn
      transform: rotate(90deg)

.no-search-results
  &__box
    display: grid
    gap: 24px
    justify-items: start
  &__text
    font-size: 20px
    line-height: 130%
    color: $gray-text
    font-weight: 400
    @media all and ($m)
      font-size: 16px
  &__button
    border-radius: 4px
    padding: 16px 32px
    background: $green
    transition: background $anim
    a
      font-weight: 500
      font-size: 14px
      line-height: 130%
      color: #fff
    &:hover, &:active, &:focus
      background: $green-darken
